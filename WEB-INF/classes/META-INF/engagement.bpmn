<?xml version="1.0" encoding="UTF-8"?>
<bpmn2:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn2="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:camunda="http://activiti.org/bpmn" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xsi:schemaLocation="http://www.omg.org/spec/BPMN/20100524/MODEL BPMN20.xsd" id="_1CO4MFE3EeWXLZr6Pe93_w" exporter="camunda modeler" exporterVersion="2.7.0" targetNamespace="http://activiti.org/bpmn">
  <bpmn2:process id="Engagement" name="Run Engagement" isExecutable="true">
    <bpmn2:dataObject id="DataObject_1" name="participants"/>
    <bpmn2:dataObject id="DataObject_2" name="modelId"/>
    <bpmn2:dataObject id="DataObject_3" name="initiator"/>
    <bpmn2:dataObject id="DataObject_4" name="participants"/>
    <bpmn2:dataObject id="DataObject_5" name="organisation"/>
    <bpmn2:dataObject id="DataObject_6" name="engagement"/>
    <bpmn2:dataObject id="DataObject_7" name="group"/>
    <bpmn2:intermediateThrowEvent id="IntermediateThrowEvent_1">
      <bpmn2:incoming>SequenceFlow_2</bpmn2:incoming>
      <bpmn2:incoming>SequenceFlow_3</bpmn2:incoming>
      <bpmn2:incoming>SequenceFlow_4</bpmn2:incoming>
      <bpmn2:compensateEventDefinition id="_CompensateEventDefinition_3" waitForCompletion="false"/>
    </bpmn2:intermediateThrowEvent>
    <bpmn2:startEvent id="SetDetailsOfEngagement" camunda:formKey="app:doTask.jsp" name="Start Engagement">
      <bpmn2:extensionElements>
        <camunda:formData>
          <camunda:formField id="collectLikelihood" label="Collect Likelihood of Risks" type="boolean" defaultValue="true">
          </camunda:formField>
          <camunda:formField id="collectSeverity" label="Collect Severity of Risks" type="boolean" defaultValue="true">
          </camunda:formField>
          <camunda:formField id="collectVelocity" label="Collect Velocity of Risks" type="boolean" defaultValue="true">
          </camunda:formField>
          <camunda:formField id="engagementName" label="Name of Engagement" type="string">
		  </camunda:formField>
		  <camunda:formField id="engagementId" label="Engagement Id" type="string">
		  </camunda:formField>	
		  <camunda:formField id="clientLeadEmail" label="Client Lead Email" type="string">
		  </camunda:formField>
		  <camunda:formField id="clientName" label="Client Name" type="string"/>
		  <camunda:formField id="engagementManagerName" label="Engagement Manager Name" type="string"/>
		  <camunda:formField id="workshopFacilitorName" label="Workshop Facilitor Name" type="string"/>
		  <camunda:formField id="engagementDescription" label="Engagement Description" type="string"/>
		  <camunda:formField id="keySponsor" label="Key Sponsor" type="string"/>
		  <camunda:formField id="sentinelApprovalNumber" label="Sentinel Approval Number" type="string"/>
		  <camunda:formField id="projectManager" label="Project Manager" type="string"/>
		  <camunda:formField id="engagementPartner" label="Engagement Partner" type="string"/>
		  <camunda:formField id="platinumAccount" label="Platinum Account" type="boolean" defaultValue="false"/>
		  <camunda:formField id="secRegistrant" label="SEC Registrant" type="boolean" defaultValue="false"/>
		  <camunda:formField id="organisationId" label="Id of Organisation" type="string"/>
          <camunda:formField id="collectConnections" label="Collect Risk Interconnections" type="boolean" defaultValue="true"/>
          <camunda:formField id="idOfPreviousEngagement" label="Id of Previous Engagment" type="string"/>
          <camunda:formField id="engagementManager" label="Engagement Manager" type="string"/>
        </camunda:formData>
        <camunda:executionListener class="com.kpmg.dra.engagement.ProcessStartListener" event="start"/>
      </bpmn2:extensionElements>
      <bpmn2:outgoing>SequenceFlow_19</bpmn2:outgoing>
    </bpmn2:startEvent>
    <bpmn2:sequenceFlow id="SequenceFlow_19" name="" sourceRef="SetDetailsOfEngagement" targetRef="CallActivity_3"/>
    <bpmn2:boundaryEvent id="BoundaryEvent_1" name="" attachedToRef="CallActivity_3">
      <bpmn2:outgoing>SequenceFlow_2</bpmn2:outgoing>
      <bpmn2:errorEventDefinition id="ErrorEventDefinition_1" errorRef="Error_1"/>
    </bpmn2:boundaryEvent>
    <bpmn2:sequenceFlow id="SequenceFlow_2" name="" sourceRef="BoundaryEvent_1" targetRef="IntermediateThrowEvent_1"/>
    <bpmn2:callActivity id="CallActivity_3" name="Initialise Engagement" calledElement="InitialiseEngagementProcess">
      <bpmn2:extensionElements>
        <camunda:out source="participants" target="participants"/>
        <camunda:in source="engagement" target="engagement"/>
        <camunda:in variables="all"/>
        <camunda:out variables="all"/>
      </bpmn2:extensionElements>
      <bpmn2:incoming>SequenceFlow_19</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_23</bpmn2:outgoing>
    </bpmn2:callActivity>
    <bpmn2:sequenceFlow id="SequenceFlow_23" name="" sourceRef="CallActivity_3" targetRef="EditData"/>
    <bpmn2:boundaryEvent id="BoundaryEvent_2" name="" attachedToRef="EditData">
      <bpmn2:outgoing>SequenceFlow_3</bpmn2:outgoing>
      <bpmn2:errorEventDefinition id="ErrorEventDefinition_2" errorRef="Error_1"/>
    </bpmn2:boundaryEvent>
    <bpmn2:sequenceFlow id="SequenceFlow_3" name="" sourceRef="BoundaryEvent_2" targetRef="IntermediateThrowEvent_1"/>
    <bpmn2:callActivity id="EditData" camunda:async="true" name="Edit Data" calledElement="EditDataProcess">
      <bpmn2:extensionElements>
        <camunda:in variables="all"/>
        <camunda:out variables="all"/>
        <camunda:in source="engagement" target="engagement"/>
      </bpmn2:extensionElements>
      <bpmn2:incoming>SequenceFlow_23</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_18</bpmn2:outgoing>
      <bpmn2:multiInstanceLoopCharacteristics camunda:collection="participants" camunda:elementVariable="participant"/>
    </bpmn2:callActivity>
    <bpmn2:sequenceFlow id="SequenceFlow_18" name="" sourceRef="EditData" targetRef="CreateAggregateModel"/>
    <bpmn2:boundaryEvent id="BoundaryEvent_3" name="" attachedToRef="CreateAggregateModel">
      <bpmn2:outgoing>SequenceFlow_4</bpmn2:outgoing>
      <bpmn2:errorEventDefinition id="ErrorEventDefinition_3" errorRef="Error_1"/>
    </bpmn2:boundaryEvent>
    <bpmn2:sequenceFlow id="SequenceFlow_4" name="" sourceRef="BoundaryEvent_3" targetRef="IntermediateThrowEvent_1"/>
    <bpmn2:serviceTask id="CreateAggregateModel" camunda:class="com.kpmg.dra.engagement.CreateAggregateModel" camunda:async="true" name="Create Aggregate Model">
      <bpmn2:incoming>SequenceFlow_18</bpmn2:incoming>
      <bpmn2:outgoing>SequenceFlow_1</bpmn2:outgoing>
    </bpmn2:serviceTask>
    <bpmn2:sequenceFlow id="SequenceFlow_1" name="" sourceRef="CreateAggregateModel" targetRef="EndEvent_1"/>
    <bpmn2:endEvent id="EndEvent_1">
      <bpmn2:incoming>SequenceFlow_1</bpmn2:incoming>
    </bpmn2:endEvent>
    <bpmn2:textAnnotation id="TextAnnotation_1">
      <bpmn2:text>Engagement Manager</bpmn2:text>
    </bpmn2:textAnnotation>
    <bpmn2:textAnnotation id="TextAnnotation_2">
      <bpmn2:text>Participant</bpmn2:text>
    </bpmn2:textAnnotation>
    <bpmn2:association id="Association_1" sourceRef="TextAnnotation_1" targetRef="CallActivity_3"/>
    <bpmn2:association id="Association_2" sourceRef="TextAnnotation_2" targetRef="EditData"/>
    <bpmn2:textAnnotation id="TextAnnotation_3">
      <bpmn2:text>System</bpmn2:text>
    </bpmn2:textAnnotation>
    <bpmn2:association id="Association_3" sourceRef="TextAnnotation_3" targetRef="CreateAggregateModel"/>
  </bpmn2:process>
  <bpmn2:message id="Message_2" name="cancelEngagement"/>
  <bpmn2:message id="Message_1" name="createAggregate"/>
  <bpmn2:error id="Error_1" errorCode="TechnicalError" name="Technical Error"/>
  <bpmndi:BPMNDiagram id="BPMNDiagram_1">
    <bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Engagement">
      <bpmndi:BPMNShape id="_BPMNShape_EndEvent_2" bpmnElement="EndEvent_1">
        <dc:Bounds height="36.0" width="36.0" x="1256.0" y="540.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="0.0" width="0.0" x="1274.0" y="581.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_StartEvent_3" bpmnElement="SetDetailsOfEngagement">
        <dc:Bounds height="36.0" width="36.0" x="1255.0" y="12.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="22.0" width="238.0" x="1291.0" y="19.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_TextAnnotation_2" bpmnElement="TextAnnotation_1">
        <dc:Bounds height="50.0" width="88.0" x="1464.0" y="86.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_TextAnnotation_3" bpmnElement="TextAnnotation_2">
        <dc:Bounds height="50.0" width="112.0" x="1428.0" y="220.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_ServiceTask_12" bpmnElement="CreateAggregateModel">
        <dc:Bounds height="80.0" width="176.0" x="1185.0" y="336.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_CallActivity_3" bpmnElement="EditData">
        <dc:Bounds height="80.0" width="203.0" x="1171.0" y="198.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_18" bpmnElement="SequenceFlow_18" sourceElement="_BPMNShape_CallActivity_3" targetElement="_BPMNShape_ServiceTask_12">
        <di:waypoint xsi:type="dc:Point" x="1272.0" y="278.0"/>
        <di:waypoint xsi:type="dc:Point" x="1272.0" y="307.0"/>
        <di:waypoint xsi:type="dc:Point" x="1273.0" y="307.0"/>
        <di:waypoint xsi:type="dc:Point" x="1273.0" y="336.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1270.0" y="319.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_CallActivity_4" bpmnElement="CallActivity_3">
        <dc:Bounds height="80.0" width="203.0" x="1171.0" y="81.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_19" bpmnElement="SequenceFlow_19" sourceElement="_BPMNShape_StartEvent_3" targetElement="_BPMNShape_CallActivity_4">
        <di:waypoint xsi:type="dc:Point" x="1273.0" y="48.0"/>
        <di:waypoint xsi:type="dc:Point" x="1273.0" y="64.0"/>
        <di:waypoint xsi:type="dc:Point" x="1272.0" y="64.0"/>
        <di:waypoint xsi:type="dc:Point" x="1272.0" y="81.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1269.0" y="75.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_23" bpmnElement="SequenceFlow_23" sourceElement="_BPMNShape_CallActivity_4" targetElement="_BPMNShape_CallActivity_3">
        <di:waypoint xsi:type="dc:Point" x="1272.0" y="161.0"/>
        <di:waypoint xsi:type="dc:Point" x="1272.0" y="198.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1269.0" y="183.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_1" bpmnElement="SequenceFlow_1" sourceElement="_BPMNShape_ServiceTask_12" targetElement="_BPMNShape_EndEvent_2">
        <di:waypoint xsi:type="dc:Point" x="1273.0" y="416.0"/>
        <di:waypoint xsi:type="dc:Point" x="1274.0" y="540.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1270.0" y="433.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_BoundaryEvent_15" bpmnElement="BoundaryEvent_1">
        <dc:Bounds height="36.0" width="36.0" x="1153.0" y="86.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1168.0" y="127.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="_BPMNShape_IntermediateThrowEvent_4" bpmnElement="IntermediateThrowEvent_1">
        <dc:Bounds height="36.0" width="36.0" x="997.0" y="237.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_2" bpmnElement="SequenceFlow_2" sourceElement="_BPMNShape_BoundaryEvent_15" targetElement="_BPMNShape_IntermediateThrowEvent_4">
        <di:waypoint xsi:type="dc:Point" x="1153.0" y="113.0"/>
        <di:waypoint xsi:type="dc:Point" x="1055.0" y="162.0"/>
        <di:waypoint xsi:type="dc:Point" x="1023.0" y="237.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1043.0" y="182.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_BoundaryEvent_16" bpmnElement="BoundaryEvent_2">
        <dc:Bounds height="36.0" width="36.0" x="1153.0" y="219.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1168.0" y="260.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_3" bpmnElement="SequenceFlow_3" sourceElement="_BPMNShape_BoundaryEvent_16" targetElement="_BPMNShape_IntermediateThrowEvent_4">
        <di:waypoint xsi:type="dc:Point" x="1153.0" y="237.0"/>
        <di:waypoint xsi:type="dc:Point" x="1093.0" y="237.0"/>
        <di:waypoint xsi:type="dc:Point" x="1093.0" y="255.0"/>
        <di:waypoint xsi:type="dc:Point" x="1033.0" y="255.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1090.0" y="246.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_BoundaryEvent_17" bpmnElement="BoundaryEvent_3">
        <dc:Bounds height="36.0" width="36.0" x="1167.0" y="361.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1182.0" y="402.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_SequenceFlow_4" bpmnElement="SequenceFlow_4" sourceElement="_BPMNShape_BoundaryEvent_17" targetElement="_BPMNShape_IntermediateThrowEvent_4">
        <di:waypoint xsi:type="dc:Point" x="1167.0" y="374.0"/>
        <di:waypoint xsi:type="dc:Point" x="1050.0" y="339.0"/>
        <di:waypoint xsi:type="dc:Point" x="1023.0" y="273.0"/>
        <bpmndi:BPMNLabel>
          <dc:Bounds height="6.0" width="6.0" x="1044.0" y="333.0"/>
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_Association_1" bpmnElement="Association_1" sourceElement="_BPMNShape_TextAnnotation_2" targetElement="_BPMNShape_CallActivity_4">
        <di:waypoint xsi:type="dc:Point" x="1464.0" y="113.0"/>
        <di:waypoint xsi:type="dc:Point" x="1373.0" y="117.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="BPMNEdge_Association_2" bpmnElement="Association_2" sourceElement="_BPMNShape_TextAnnotation_3" targetElement="_BPMNShape_CallActivity_3">
        <di:waypoint xsi:type="dc:Point" x="1428.0" y="243.0"/>
        <di:waypoint xsi:type="dc:Point" x="1373.0" y="241.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="_BPMNShape_TextAnnotation_4" bpmnElement="TextAnnotation_3">
        <dc:Bounds height="50.0" width="112.0" x="1428.0" y="344.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="BPMNEdge_Association_3" bpmnElement="Association_3" sourceElement="_BPMNShape_TextAnnotation_4" targetElement="_BPMNShape_ServiceTask_12">
        <di:waypoint xsi:type="dc:Point" x="1428.0" y="371.0"/>
        <di:waypoint xsi:type="dc:Point" x="1361.0" y="373.0"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn2:definitions>